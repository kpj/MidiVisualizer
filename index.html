<html>
<head>
	<title>WebGL Test</title>

	<style>
		#container { 
			width: 100%;
			height: 100%;
		}
	</style>


	<!-- MIDI -->
	<script src="./libs/jasmid/replayer.js" type="text/javascript"></script>
	<script src="./libs/jasmid/midifile.js" type="text/javascript"></script>
	<script src="./libs/jasmid/stream.js" type="text/javascript"></script>

	<script src="./libs/midi/MIDI/AudioDetect.js" type="text/javascript"></script>
	<script src="./libs/midi/MIDI/LoadPlugin.js" type="text/javascript"></script>
	<script src="./libs/midi/MIDI/Plugin.js" type="text/javascript"></script>
	<script src="./libs/midi/MIDI/Player.js" type="text/javascript"></script>
	<script src="./libs/midi/Window/DOMLoader.script.js" type="text/javascript"></script>

	<script src="./libs/midi/inc/Base64.js" type="text/javascript"></script>
 	<script src="./libs/midi/inc/base64binary.js" type="text/javascript"></script>

 	<!-- WebGL -->
	<script src="./libs/webgl/three.min.js"></script>

	<!-- Own sources -->
	<script src="./js/webgl.js"></script>
	<script src="./js/midi.js"></script>

	<script>
		window.onload = function() {
			console.log('Window loaded');

			initWebGL();
			console.log('WebGL loaded');

			MIDI.loadPlugin({
				soundfontUrl: "./libs/midi/soundfont/",
				instrument: "acoustic_grand_piano",
				callback: function() {
					console.log('MIDI-Plugin loaded');

					initListener();

					MIDI.Player.loadFile(
						'test.mid', 
						function() {
							console.log('Song loaded');

							// webgl stuff
							render();
							for(var i = 0 ; i < 5 ; i++)
								createCube(-10 + i*4);

							MIDI.Player.start();
						}
					);
				}
			});
		}
	</script>
</head>
<body>
	<div id="container"></div>
</body>
</html>